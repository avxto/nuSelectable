/**
 * nuSelectable - jQuery Plugin
 * Copyright (c) 2015, Alex Suyun
 * Copyrights licensed under The MIT License (MIT)
 */
!function(a,b,c,d){"use strict";var e="nuSelectable",g=function(b,c){this.container=a(b),this.options=a.extend({},c,c),this.selection=a("<div>").addClass(this.options.selectionClass),this.items=a(this.options.items),this.init()};g.prototype.init=function(){return this.options.autoRefresh||(this.itemData=this._cacheItemData()),this.selecting=!1,this._normalizeContainer(),this._bindEvents(),!0},g.prototype._normalizeContainer=function(){this.container.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})},g.prototype._cacheItemData=function(){var c,b=[];c=this.items.length;for(var e,d=0;e=a(this.items[d]),c>d;d++)b.push({element:e,selected:e.hasClass(this.options.selectedClass),selecting:!1,position:e[0].getBoundingClientRect()});return b},g.prototype._collisionDetector=function(){for(var d,a=this.selection[0].getBoundingClientRect(),b=this.itemData.length,c=b-1;d=this.itemData[c],c>=0;c--){var e=!(a.right<d.position.left||a.left>d.position.right||a.bottom<d.position.top||a.top>d.position.bottom);e?(d.selected&&(d.element.removeClass(this.options.selectedClass),d.selected=!1),d.selected||(d.element.addClass(this.options.selectedClass),d.selected=!0)):this.selecting&&d.element.removeClass(this.options.selectedClass)}},g.prototype._createSelection=function(a,b){this.selection.css({position:"absolute",top:b+"px",left:a+"px",width:"0",height:"0","z-index":"999",overflow:"hidden"}).appendTo(this.container)},g.prototype._drawSelection=function(a,b,c,d){this.selection.css({width:a,height:b,top:d,left:c})},g.prototype.clear=function(){this.items.removeClass(this.options.selectedClass)},g.prototype._mouseDown=function(a){return a.preventDefault(),a.stopPropagation(),this.options.disable?!1:1!==a.which?!1:(this.options.autoRefresh&&(this.itemData=this._cacheItemData()),a.metaKey||a.ctrlKey?this.selecting=!1:this.selecting=!0,this.pos=[a.pageX,a.pageY],void this._createSelection(a.pageX,a.pageY))},g.prototype._mouseMove=function(a){a.preventDefault(),a.stopPropagation();var b=this.pos;if(!b)return!1;var f,g,c=[a.pageX,a.pageY],d=Math.abs(c[0]-b[0]),e=Math.abs(c[1]-b[1]);f=c[0]<b[0]?b[0]-d:b[0],g=c[1]<b[1]?b[1]-e:b[1],this._drawSelection(d,e,f,g),this._collisionDetector()},g.prototype._mouseUp=function(a){return a.preventDefault(),a.stopPropagation(),this.pos?(this.selecting=!1,this.selection.remove(),void(a.pageX===this.pos[0]&&a.pageY===this.pos[1]&&this.clear())):!1},g.prototype._bindEvents=function(){this.container.on("mousedown",a.proxy(this._mouseDown,this)),this.container.on("mousemove",a.proxy(this._mouseMove,this)),this.container.on("mouseup",a.proxy(this._mouseUp,this))},a.fn[e]=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data(e);f?"string"==typeof b&&"_"!==b[0]&&"init"!==b&&f[b].apply(f,c):d.data(e,new g(this,b))})}}(jQuery,window,document);
